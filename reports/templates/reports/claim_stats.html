{% extends "base_generic.html" %}
{% block title %}Claim Statistics{% endblock %}
{% block content %}
<h2 class="mb-4">Claim Statistics</h2>
<div class="row">
    <div class="col-md-4 mb-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Reports Today</h5>
                <p class="card-text">{{ reports_today }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Reports This Week</h5>
                <p class="card-text">{{ reports_week }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Reports This Month</h5>
                <p class="card-text">{{ reports_month }}</p>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-md-4 mb-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">In Progress</h5>
                <p class="card-text">{{ in_progress }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Solved</h5>
                <p class="card-text">{{ solved }}</p>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">Stagnant</h5>
                <p class="card-text">{{ stagnant }}</p>
            </div>
        </div>
    </div>
</div>
<h3 class="mb-4">All Claims</h3>
<div class="input-group mb-4">
    <input type="text" class="form-control" placeholder="Search claims..." id="searchQuery">
    <div class="input-group-append">
        <button class="btn btn-outline-secondary" type="button" onclick="searchClaims()">Search</button>
    </div>
</div>
<div id="searchResults">
    {% for claim in all_claims %}
    <div class="card mb-3">
        <div class="card-body">
            <h5 class="card-title">{{ claim.accuser.accuser_name }} vs {{ claim.accused.accused_name }}</h5>
            <p class="card-text">{{ claim.claim_details }}</p>
            <p class="card-text"><small class="text-muted">{{ claim.date_reported }}</small></p>
        </div>
    </div>
    {% endfor %}
</div>
<a href="{% url 'claim_stats_pdf' %}" class="btn btn-primary mt-4">Download PDF</a>
<script>
    function searchClaims() {
        const query = document.getElementById('searchQuery').value;
        window.location.href = `{% url 'search_claims' %}?query=${query}`;
    }
</script>
{% endblock %}
